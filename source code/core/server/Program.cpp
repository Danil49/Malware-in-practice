#include "Connection.hpp"
#include "Helper.hpp"
#include "Settings.hpp"
#include "Builder.hpp"

int main()
{
	Settings::CertificateName = "certificate.p12";

	std::cout << "Choose an option:\n";
	std::cout << "[1] Builder.\n";
	std::cout << "[2] Command Panel.\n";
	std::string choiceStr;
	std::getline(std::cin, choiceStr);
	int choice = 0;
	try {
		choice = std::stoi(choiceStr);
	}
	catch (const std::exception& e) {
		std::cerr << "Invalid choice...\n";
	}
	if (choice == 1) {
		Builder builder;
		builder.GetInput();
		builder.WriteSettings();
	}

	std::cout << "\nEnter port to listen: ";
	std::cin >> Settings::Port;
	system("cls");
	Connection::ServerSocket::InitializeServer(Settings::Port);

	return 0;
}
