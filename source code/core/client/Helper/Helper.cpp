#include "Helper.hpp"
#include "../Settings.hpp"

namespace Helper {
    HANDLE Mutex::currentApp;

    bool Mutex::CreateTheMutex() {
        currentApp = CreateMutex(nullptr, FALSE, Helper::StringToWString(Settings::MTX).c_str());
        return (currentApp != nullptr) && (GetLastError() != ERROR_ALREADY_EXISTS);
    }

    void Mutex::CloseTheMutex() {
        if (currentApp != nullptr) {
            ReleaseMutex(currentApp);
            CloseHandle(currentApp);
            currentApp = nullptr;
        }
    }
}

